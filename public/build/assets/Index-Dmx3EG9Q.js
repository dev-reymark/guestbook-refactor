import{r,j as e,Y as $}from"./app-B8wJlkXe.js";import{A as G}from"./AuthenticatedLayout-DoKafGsj.js";import{S as R,t as A,a as H,b as p,c as q,d as K,e as b,C as U}from"./Icons-3JYaBUnz.js";import"./sweetalert2.all-C9JU52f1.js";import{c as a}from"./index-CBUsuKQ3.js";import{e as W}from"./index-DuHDXjoJ.js";import{d as Y}from"./chunk-CEX5JYEG-BeH8Gxvb.js";import{t as J,r as Q,m as X,u as Z,j as B,q as L,o as ee,s as ae,c as se,k as te}from"./chunk-XHQUSKIE-BlY06RPx.js";import{C as re,i as ne}from"./chunk-ZH5EUE66-CxEA0QPJ.js";import{s as oe,l as P}from"./chunk-OKTOLZE5-DRMDYx0s.js";import{p as le}from"./chunk-F7XGZDO5-DjSzqCpp.js";import"./ApplicationLogo-4bPMnUhk.js";import"./chunk-3XT5V4LF-DQBoBbEA.js";import"./useMenuTriggerState-CgLG_V_L.js";import"./useDialog-DL7tfeNG.js";import"./useControlledState-CodWoSaW.js";import"./VisuallyHidden-DsRFQPz7.js";import"./index-BpPyH1Gw.js";import"./chunk-CIZQCQPA-BvWtGa_4.js";import"./chunk-6NL67ZRH-ClE0TNvt.js";import"./chunk-44JHHBS2-C6KDo9V4.js";import"./index-CmQ22bnI.js";import"./getScrollParent-DSOL5RJh.js";import"./chunk-HUKVTWEI-4_S4PGkY.js";import"./index-m2iL5YNw.js";import"./useField-BOmeLJZo.js";import"./LiveAnnouncer-CuNtP5Ew.js";import"./useUpdateEffect-C5JiW2TK.js";import"./chunk-7F3ZLNJ6-V0JqOB_6.js";import"./chunk-IXXDDLGU-BXG-Bsk3.js";import"./iconBase-D4Ysufdu.js";import"./useFilter-DPz-8jur.js";import"./chunk-VGNVQLL4-bgx7yXiI.js";import"./index-X92CTFGl.js";var I=J({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...Q,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:a.solid.default}},{variant:"solid",color:"primary",class:{base:a.solid.primary}},{variant:"solid",color:"secondary",class:{base:a.solid.secondary}},{variant:"solid",color:"success",class:{base:a.solid.success}},{variant:"solid",color:"warning",class:{base:a.solid.warning}},{variant:"solid",color:"danger",class:{base:a.solid.danger}},{variant:"shadow",color:"default",class:{base:a.shadow.default}},{variant:"shadow",color:"primary",class:{base:a.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:a.shadow.secondary}},{variant:"shadow",color:"success",class:{base:a.shadow.success}},{variant:"shadow",color:"warning",class:{base:a.shadow.warning}},{variant:"shadow",color:"danger",class:{base:a.shadow.danger}},{variant:"bordered",color:"default",class:{base:a.bordered.default}},{variant:"bordered",color:"primary",class:{base:a.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:a.bordered.secondary}},{variant:"bordered",color:"success",class:{base:a.bordered.success}},{variant:"bordered",color:"warning",class:{base:a.bordered.warning}},{variant:"bordered",color:"danger",class:{base:a.bordered.danger}},{variant:"flat",color:"default",class:{base:a.flat.default}},{variant:"flat",color:"primary",class:{base:a.flat.primary}},{variant:"flat",color:"secondary",class:{base:a.flat.secondary}},{variant:"flat",color:"success",class:{base:a.flat.success}},{variant:"flat",color:"warning",class:{base:a.flat.warning}},{variant:"flat",color:"danger",class:{base:a.flat.danger}},{variant:"faded",color:"default",class:{base:a.faded.default}},{variant:"faded",color:"primary",class:{base:a.faded.primary}},{variant:"faded",color:"secondary",class:{base:a.faded.secondary}},{variant:"faded",color:"success",class:{base:a.faded.success}},{variant:"faded",color:"warning",class:{base:a.faded.warning}},{variant:"faded",color:"danger",class:{base:a.faded.danger}},{variant:"light",color:"default",class:{base:a.light.default}},{variant:"light",color:"primary",class:{base:a.light.primary}},{variant:"light",color:"secondary",class:{base:a.light.secondary}},{variant:"light",color:"success",class:{base:a.light.success}},{variant:"light",color:"warning",class:{base:a.light.warning}},{variant:"light",color:"danger",class:{base:a.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]});function ie(d){const[x,v]=X(d,I.variantKeys),{ref:y,as:c,children:o,avatar:u,startContent:m,endContent:n,onClose:h,classNames:t,className:g,...j}=x,_=c||"div",w=Z(y),E=B(t==null?void 0:t.base,g),f=!!h,s=d.variant==="dot",{focusProps:l,isFocusVisible:i}=L(),D=r.useMemo(()=>typeof o=="string"&&(o==null?void 0:o.length)===1,[o]),N=r.useMemo(()=>!!u||!!m,[u,m]),S=r.useMemo(()=>!!n||f,[n,f]),k=r.useMemo(()=>I({...v,hasStartContent:N,hasEndContent:S,isOneChar:D,isCloseable:f,isCloseButtonFocusVisible:i}),[ee(v),i,N,S,D,f]),{pressProps:z}=ae({isDisabled:!!(d!=null&&d.isDisabled),onPress:h}),O=()=>({ref:w,className:k.base({class:E}),...j}),V=()=>({role:"button",tabIndex:0,className:k.closeButton({class:t==null?void 0:t.closeButton}),...se(z,l)}),F=C=>r.isValidElement(C)?r.cloneElement(C,{className:k.avatar({class:t==null?void 0:t.avatar})}):null,T=C=>r.isValidElement(C)?r.cloneElement(C,{className:B("max-h-[80%]",C.props.className)}):null;return{Component:_,children:o,slots:k,classNames:t,isDot:s,isCloseable:f,startContent:F(u)||T(m),endContent:T(n),getCloseButtonProps:V,getChipProps:O}}var M=te((d,x)=>{const{Component:v,children:y,slots:c,classNames:o,isDot:u,isCloseable:m,startContent:n,endContent:h,getCloseButtonProps:t,getChipProps:g}=ie({...d,ref:x}),j=r.useMemo(()=>u&&!n?e.jsx("span",{className:c.dot({class:o==null?void 0:o.dot})}):n,[c,n,u]),_=r.useMemo(()=>m?e.jsx("span",{...t(),children:h||e.jsx(re,{})}):h,[h,m,t]);return e.jsxs(v,{...g(),children:[j,e.jsx("span",{className:c.content({class:o==null?void 0:o.content}),children:y}),_]})});M.displayName="NextUI.Chip";var ce=M;function qe({auth:d,guestLogs:x}){const[v,y]=r.useState(""),[c,o]=r.useState({start:null,end:null}),[u,m]=r.useState(x),[n,h]=r.useState(1),t=8,[g,j]=r.useState("");r.useEffect(()=>{(()=>{const l=new Date;let i=null;switch(g){case"past24Hours":i=new Date(l.getTime()-864e5);break;case"past7Days":i=new Date(l.getTime()-6048e5);break;case"past30Days":i=new Date(l.getTime()-2592e6);break;default:i=null;break}const D=x.filter(N=>{const S=new Date(N.check_in_time);return i?S>=i:!0});m(D)})()},[g,x]);const _=s=>{const l=s.guest.name.toLowerCase().includes(v.toLowerCase()),i=(!c.start||new Date(s.created_at)>=new Date(c.start))&&(!c.end||new Date(s.created_at)<=new Date(c.end));return l&&i},w=u.filter(_),E=Math.ceil(w.length/t),f=r.useMemo(()=>{const s=(n-1)*t,l=s+t;return w.slice(s,l)},[n,t,w]);return e.jsxs(G,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Guest Logs"}),children:[e.jsx($,{title:"Guests Logs"}),e.jsx("div",{className:"py-12 p-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2 justify-end mb-4",children:[e.jsx(ne,{variant:"bordered",placeholder:"Search by guest name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(R,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:v,onChange:s=>y(s.target.value)}),e.jsxs(oe,{variant:"bordered",placeholder:"Filter by Interval",value:g,onChange:s=>j(s.target.value),children:[e.jsx(P,{value:"current",children:"All Time"},"current"),e.jsx(P,{value:"past24Hours",children:"Past 24 Hours"},"past24Hours"),e.jsx(P,{value:"past7Days",children:"Past 7 Days"},"past7Days"),e.jsx(P,{value:"past30Days",children:"Past 30 Days"},"past30Days")]}),e.jsx(Y,{label:"Filter by Date",labelPlacement:"top",className:"max-w-xs",variant:"bordered",visibleMonths:2,onChange:s=>o(s)})]}),e.jsxs(A,{selectionMode:"single","aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(le,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:n,total:E,onChange:s=>h(s)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(H,{children:[e.jsxs(p,{className:"text-success",children:["# (",(n-1)*t+1,"-",Math.min(n*t,w.length)," ","of ",w.length,")"]}),e.jsx(p,{children:"Guest ID"}),e.jsx(p,{children:"Guest Name"}),e.jsx(p,{children:"Meeting With"}),e.jsx(p,{children:"Purpose of Visit"}),e.jsx(p,{children:"Check In"}),e.jsx(p,{children:"Check Out"}),e.jsx(p,{children:"Status"})]}),e.jsx(q,{emptyContent:"No guests found.",items:f,children:f.map((s,l)=>e.jsxs(K,{children:[e.jsx(b,{className:"text-success",children:(n-1)*t+l+1}),e.jsx(b,{children:s.guest_id}),e.jsx(b,{children:s.guest.name}),e.jsx(b,{children:s.meeting_with}),e.jsx(b,{children:s.purpose_of_visit}),e.jsx(b,{children:new Date(new Date(s.check_in_time).getTime()-new Date(s.check_in_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}),e.jsx(b,{children:s.check_out_time?new Date(new Date(s.check_out_time).getTime()-new Date(s.check_out_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Not checked out yet"}),e.jsx(b,{children:e.jsx(ce,{color:s.check_out_time?"success":"danger",startContent:s.check_out_time?e.jsx(U,{}):e.jsx(W,{className:"w-5 h-5"}),variant:"flat",children:s.check_out_time?"Done":"No Checkout"})})]},s.id))})]})]})})})]})}export{qe as default};
