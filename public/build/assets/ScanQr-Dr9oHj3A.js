import{r as m,j as e,Y as b}from"./app-BL-mjf0k.js";import{j as w,a as y}from"./jsQR-CJhmSrLz.js";import{d as n,b as h}from"./index-74GHZtON.js";import{S as r}from"./sweetalert2.all-B88BR-Wc.js";import{s as N}from"./chunk-IXXDDLGU-CJfa879C.js";import"./chunk-3XT5V4LF-CMg84usL.js";import"./chunk-XHQUSKIE-DyTJRqJu.js";import"./chunk-6NL67ZRH-CuGr3cKs.js";const A=()=>{const[i,l]=m.useState(null),[x,g]=m.useState(null);m.useEffect(()=>{const a=setTimeout(()=>{n.Inertia.visit("/")},3e4);return()=>clearTimeout(a)},[]);const p=a=>{console.error(a),r.fire({title:"Error",text:"An error occurred while scanning the QR code. Please try again.",icon:"error",confirmButtonText:"OK"})},u=a=>{a&&(l(a),new Audio("/assets/audio/beep.mp3").play(),r.fire({title:"QR Code Scanned",text:"Redirecting to checkout page...",icon:"success",showConfirmButton:!1,timer:1500}).then(()=>{n.Inertia.visit(a)}))},f=a=>{const t=a.target.files[0];if(t){g(t),l(null);const s=new FileReader;s.onloadend=()=>{const o=s.result;j(o)},s.readAsDataURL(t)}},j=a=>{const t=new Image;t.onload=()=>{const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.width,s.height=t.height,o.drawImage(t,0,0,t.width,t.height);const d=o.getImageData(0,0,t.width,t.height),c=y(d.data,d.width,d.height);c?(l(c.data),new Audio("/assets/audio/beep.mp3").play(),r.fire({title:"QR Code Scanned",text:"Redirecting to checkout page...",icon:"success",showConfirmButton:!1,timer:1500}).then(()=>{n.Inertia.visit(c.data)})):r.fire({title:"Error",text:"No QR code found in the uploaded image. Please try again.",icon:"error",confirmButtonText:"OK"})},t.src=a};return e.jsxs("div",{className:"min-h-screen bg-[url(/assets/images/bg.png)] bg-cover flex items-center justify-center",children:[e.jsx(b,{title:"Scan QR Code"}),e.jsxs("div",{className:"hidden md:block max-w-5xl mx-auto bg-gray-50 p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Scan QR Code",e.jsx("span",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})}),e.jsx("p",{className:"mt-6 text-gray-600",children:"Align the QR code within the frame to scan it."})]}),e.jsx(w,{delay:300,onError:p,onResult:u,style:{width:"100%"}}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(h,{onPress:()=>n.Inertia.visit("/"),color:"danger",children:"Cancel"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"md:hidden max-w-5xl mx-auto bg-gray-50 p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Upload QR",e.jsx("span",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})}),e.jsx("p",{className:"mt-6 text-gray-600",children:"Upload the QR Code that you downloaded when you log earlier."})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"fileUpload",className:"block text-sm font-medium text-gray-700",children:"Upload QR Code Image"}),e.jsx("input",{id:"fileUpload",name:"fileUpload",type:"file",accept:".jpg, .jpeg, .png",onChange:f,className:"mt-1 bg-white border border-gray-300 px-3 py-2 rounded-lg w-full"})]}),e.jsx(N,{y:4}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(h,{onPress:()=>n.Inertia.visit("/"),color:"danger",children:"Cancel"})})]})}),i&&!x&&e.jsxs("div",{className:"mt-6 p-4 bg-green-100 text-green-800 rounded-lg",children:[e.jsxs("p",{children:["Scanned URL: ",i]}),e.jsx(h,{onClick:()=>n.Inertia.visit(i),className:"mt-2",children:"Go to Checkout"})]})]})};export{A as default};
