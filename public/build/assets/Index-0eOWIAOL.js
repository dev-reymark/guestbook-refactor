import{q as P,m as n,j as e,Y as E,b as S}from"./app-D6oMoqqm.js";import{S as G,t as A,a as I,b as r,c as T,d as F,e as s}from"./Icons-n0S3bhVa.js";import{A as M}from"./AuthenticatedLayout-C3XDYSYs.js";import{b as j}from"./index-D9vgJChr.js";import{b as R}from"./index-BlKwdCzO.js";import{S as p}from"./sweetalert2.all-XPMZHkQs.js";import"./react-webcam-Cgarn_B9.js";import{T as k}from"./index-CCoB1n6b.js";import{i as o}from"./chunk-ZH5EUE66-BnbBlYs5.js";import{p as O}from"./chunk-F7XGZDO5-Dt3WcCwM.js";import{t as L}from"./chunk-NQWEZNNL-DLr3maw3.js";import{m as B,a as U,b as V,c as Y}from"./chunk-X4CB5I5S-CZmd-Y4C.js";import{i as q}from"./chunk-YAC6J4IU-BaFl9UhN.js";import{m as H}from"./chunk-QY5NICTW-DHNEszEU.js";import"./chunk-GMMETTYU-DVo_IJkY.js";import"./chunk-XHQUSKIE-DjcTBOuN.js";import"./useMenuTriggerState--Tb75tZc.js";import"./useDialog-Bsxk8ZDi.js";import"./useControlledState-D62E11d4.js";import"./VisuallyHidden-CrVl-S-_.js";import"./index-BrKsmHvf.js";import"./getScrollParent-BxWrNVlF.js";import"./chunk-HUKVTWEI-DXkA-xqJ.js";import"./chunk-3XT5V4LF-CyNc6-LJ.js";import"./index-BtGFx3e9.js";import"./chunk-RFUEKIFS-BiXG_wtu.js";import"./useField-DBK6V9hp.js";import"./chunk-CIZQCQPA-BQVEC0G-.js";import"./LiveAnnouncer-CuNtP5Ew.js";import"./useUpdateEffect-BW0G6ARQ.js";import"./chunk-7F3ZLNJ6-D1U1X1xd.js";import"./chunk-IXXDDLGU-DCxuo5Lk.js";import"./ApplicationLogo-_A8-XntU.js";import"./chunk-6NL67ZRH-De-FcQp9.js";import"./chunk-44JHHBS2-BttJ5CRx.js";import"./iconBase-BR-cmu0o.js";import"./index-X92CTFGl.js";function Ge({auth:b}){const{props:{guests:v}}=P(),[x,N]=n.useState(""),d=v.slice().sort((t,l)=>t.name.localeCompare(l.name)).filter(t=>t.name.toLowerCase().includes(x.toLowerCase())),[y,u]=n.useState(!1),[a,_]=n.useState(null),g=async()=>{if(d.length===0){p.fire({icon:"warning",title:"No Records",text:"There are no guests to export."});return}try{const t=await S.get("/generate-report",{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([t.data])),m=document.createElement("a");m.href=l,m.setAttribute("download","Guests_Report.pdf"),document.body.appendChild(m),m.click(),p.fire({icon:"success",title:"PDF Report Generated",text:"The PDF report has been successfully generated and downloaded."})}catch(t){console.error("Error generating PDF report:",t),p.fire({icon:"error",title:"Error",text:"Failed to generate PDF report. Please try again later."})}},w=t=>{_(t),u(!0)},h=()=>{u(!1)},[c,C]=n.useState(1),i=10,D=Math.ceil(d.length/i),f=n.useMemo(()=>{const t=(c-1)*i,l=t+i;return d.slice(t,l)},[c,i,d]);return e.jsxs(M,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(E,{title:"Guests"}),e.jsx("div",{className:"py-8 p-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex justify-between gap-3 items-end mb-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(j,{color:"secondary",variant:"flat",onClick:g,className:"mt-6",startContent:e.jsx(R,{}),children:"Export to PDF"})}),e.jsx(o,{variant:"bordered",value:x,onChange:t=>N(t.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(G,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})]})}),e.jsxs(A,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(O,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:c,total:D,onChange:t=>C(t)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(I,{children:[e.jsx(r,{className:"text-success",children:"#"}),e.jsx(r,{children:"NAME"}),e.jsx(r,{children:"EMAIL"}),e.jsx(r,{children:"PHONE"}),e.jsx(r,{children:"ID TYPE"}),e.jsx(r,{children:"ID NUMBER"}),e.jsx(r,{children:"COMPANY"}),e.jsx(r,{children:"ADDRESS"}),e.jsx(r,{children:"DATE CREATED"}),e.jsx(r,{children:"ACTION"})]}),e.jsx(T,{emptyContent:"No guests found",items:f,children:f.map((t,l)=>e.jsxs(F,{children:[e.jsx(s,{className:"text-success",children:(c-1)*i+l+1}),e.jsx(s,{children:t.name}),e.jsx(s,{children:t.email}),e.jsx(s,{children:t.phone}),e.jsx(s,{children:t.id_type}),e.jsx(s,{children:t.id_number}),e.jsx(s,{children:t.company}),e.jsx(s,{children:t.address}),e.jsx(s,{children:new Date(t.created_at).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}),e.jsx(s,{children:e.jsx("div",{className:"flex justify-center text-xl cursor-pointer active:opacity-50",children:e.jsx(L,{showArrow:!0,color:"primary",content:"View",children:e.jsx("span",{className:"text-primary cursor-pointer active:opacity-50",onClick:()=>w(t),children:e.jsx(k,{className:"text-primary"})})})})})]},t.id))})]})]})}),e.jsx(B,{isDismissable:!1,isOpen:y,onOpenChange:h,hideCloseButton:!0,backdrop:"blur",scrollBehavior:"inside",children:e.jsx(U,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"flex flex-col gap-1",children:"Guest Details"}),e.jsx(Y,{children:a&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(o,{label:"Guest Name",variant:"bordered",value:a.name??"No name provided"}),e.jsx(o,{label:"Email",variant:"bordered",value:a.email??"No email provided"}),e.jsx(o,{label:"Phone",variant:"bordered",value:a.phone??"No phone provided"}),e.jsx(o,{label:"ID Type",variant:"bordered",value:a.id_type??"No ID provided"}),e.jsx(o,{label:"ID Number",variant:"bordered",value:a.id_number??"No ID number provided"}),e.jsx(o,{label:"Company",variant:"bordered",value:a.company??"No company provided"}),e.jsx(o,{label:"Address",variant:"bordered",value:a.address??"No address provided"}),e.jsx("hr",{className:"my-3"}),e.jsx("p",{children:"Guest Photo"}),e.jsx(q,{src:a.photo,alt:"Guest Photo",fallbackSrc:"https://via.placeholder.com/300x200"})]})}),e.jsx(H,{children:e.jsx(j,{color:"danger",onPress:h,children:"Close"})})]})})})]})}export{Ge as default};
