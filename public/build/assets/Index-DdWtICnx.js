import{m as $,$ as ve,r as c,j as e,q as $e,Y as je,b as ye}from"./app-B-7Bpmd6.js";import{S as ge,t as Ce,a as Pe,b as P,c as Te,d as we,e as T}from"./Icons-CLEQkTEK.js";import{A as De}from"./AuthenticatedLayout-DvEzuzy-.js";import{b as Z}from"./index-C6Ffh8a_.js";import{b as Ne}from"./index-hp4Q3bvF.js";import{S as U}from"./sweetalert2.all-5PjwUrBb.js";import{T as Oe}from"./index-CeVPPZOl.js";import{$ as Ee,a as _e,T as Ae}from"./useDialog-nTsOTp2B.js";import{$ as Re,a as Se,b as ae,c as A,d as Me,e as Ie,f as ke,g as Le,m as Fe,h as Ge,o as He,i as R,j as Ve,k as Be}from"./chunk-XHQUSKIE-BhD8Sy_7.js";import{$ as Ue,p as ee,g as te,t as ze,a as Ke}from"./useMenuTriggerState-B8e_Zu8q.js";import{m as We}from"./chunk-CIZQCQPA-IIwXBuyl.js";import{u as Ye}from"./index-C6PnN471.js";import{w as qe}from"./chunk-HUKVTWEI-CCCubU_G.js";import{L as Je,d as Qe,m as Xe,A as Ze}from"./chunk-6NL67ZRH-DGX9H9sW.js";import{i as N}from"./chunk-ZH5EUE66-sfyU8Bco.js";import{p as et}from"./chunk-F7XGZDO5-CPvPC1Vg.js";import{m as tt,a as rt,b as ot,c as at}from"./chunk-X4CB5I5S-AlMyBjvo.js";import{m as st}from"./chunk-QY5NICTW-C10xowlK.js";import"./getScrollParent-If9HsEFA.js";import"./VisuallyHidden-Frp7S9V-.js";import"./LiveAnnouncer-CuNtP5Ew.js";import"./useUpdateEffect-Czlkzpwn.js";import"./chunk-7F3ZLNJ6-BI7JSEVd.js";import"./chunk-IXXDDLGU-D-YPHoqZ.js";import"./ApplicationLogo-CZ5Oi9ED.js";import"./chunk-3XT5V4LF-CMrEOmIm.js";import"./chunk-44JHHBS2-DnsqgLBZ.js";import"./useControlledState-DE4N2mOS.js";import"./index-CA-pQ9aq.js";import"./iconBase-mRnZxUGt.js";import"./index-BsN3Sxhw.js";import"./useField-5tyhRC3N.js";import"./index-X92CTFGl.js";const z=$.createContext(null);function lt(t){let{children:a}=t,o=c.useContext(z),[n,f]=c.useState(0),m=c.useMemo(()=>({parent:o,modalCount:n,addModal(){f(s=>s+1),o&&o.addModal()},removeModal(){f(s=>s-1),o&&o.removeModal()}}),[o,n]);return $.createElement(z.Provider,{value:m},a)}function nt(){let t=c.useContext(z);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:null}}}function it(t){let{modalProviderProps:a}=nt();return $.createElement("div",{"data-overlay-container":!0,...t,...a})}function ct(t){return $.createElement(lt,null,$.createElement(it,t))}function re(t){let a=Re(),{portalContainer:o=a?null:document.body,...n}=t;if($.useEffect(()=>{if(o!=null&&o.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[o]),!o)return null;let f=$.createElement(ct,n);return ve.createPortal(f,o)}const dt=1500,oe=500;let E={},ut=0,I=!1,w=null,_=null;function pt(t={}){let{delay:a=dt,closeDelay:o=oe}=t,{isOpen:n,open:f,close:m}=Ee(t),s=c.useMemo(()=>`${++ut}`,[]),l=c.useRef(),u=()=>{E[s]=y},x=()=>{for(let i in E)i!==s&&(E[i](!0),delete E[i])},d=()=>{clearTimeout(l.current),l.current=null,x(),u(),I=!0,f(),w&&(clearTimeout(w),w=null),_&&(clearTimeout(_),_=null)},y=i=>{i||o<=0?(clearTimeout(l.current),l.current=null,m()):l.current||(l.current=setTimeout(()=>{l.current=null,m()},o)),w&&(clearTimeout(w),w=null),I&&(_&&clearTimeout(_),_=setTimeout(()=>{delete E[s],_=null,I=!1},Math.max(oe,o)))},h=()=>{x(),u(),!n&&!w&&!I?w=setTimeout(()=>{w=null,I=!0,d()},a):n||d()};return c.useEffect(()=>()=>{clearTimeout(l.current),E[s]&&delete E[s]},[s]),{isOpen:n,open:i=>{!i&&a>0&&!l.current?h():d()},close:y}}function mt(t,a){let o=Se(t,{labelable:!0}),{hoverProps:n}=ae({onHoverStart:()=>a==null?void 0:a.open(!0),onHoverEnd:()=>a==null?void 0:a.close()});return{tooltipProps:A(o,n,{role:"tooltip"})}}function ft(t,a,o){let{isDisabled:n,trigger:f}=t,m=Me(),s=c.useRef(!1),l=c.useRef(!1),u=()=>{(s.current||l.current)&&a.open(l.current)},x=p=>{!s.current&&!l.current&&a.close(p)};c.useEffect(()=>{let p=r=>{o&&o.current&&r.key==="Escape"&&(r.stopPropagation(),a.close(!0))};if(a.isOpen)return document.addEventListener("keydown",p,!0),()=>{document.removeEventListener("keydown",p,!0)}},[o,a]);let d=()=>{f!=="focus"&&(ke()==="pointer"?s.current=!0:s.current=!1,u())},y=()=>{f!=="focus"&&(l.current=!1,s.current=!1,x())},h=()=>{l.current=!1,s.current=!1,x(!0)},i=()=>{Le()&&(l.current=!0,u())},b=()=>{l.current=!1,s.current=!1,x(!0)},{hoverProps:v}=ae({isDisabled:n,onHoverStart:d,onHoverEnd:y}),{focusableProps:D}=Ie({isDisabled:n,onFocus:i,onBlur:b},o);return{triggerProps:{"aria-describedby":a.isOpen?m:void 0,...A(D,v,{onPointerDown:h,onKeyDown:h})},tooltipProps:{id:m}}}function xt(t){const[a,o]=Fe(t,ee.variantKeys),{ref:n,as:f,isOpen:m,content:s,children:l,defaultOpen:u,onOpenChange:x,isDisabled:d,trigger:y,shouldFlip:h=!0,containerPadding:i=12,placement:b="top",delay:v=0,closeDelay:D=500,showArrow:p=!1,offset:r=7,crossOffset:j=0,isDismissable:g,shouldCloseOnBlur:le=!0,portalContainer:ne,isKeyboardDismissDisabled:ie=!1,updatePositionDeps:K=[],shouldCloseOnInteractOutside:ce,className:de,onClose:W,motionProps:ue,classNames:S,...B}=a,pe=f||"div",M=pt({delay:v,closeDelay:D,isDisabled:d,defaultOpen:u,isOpen:m,onOpenChange:O=>{x==null||x(O),O||W==null||W()}}),k=c.useRef(null),L=c.useRef(null),F=c.useId(),C=M.isOpen&&!d;c.useImperativeHandle(n,()=>Ge(L));const{triggerProps:Y,tooltipProps:me}=ft({isDisabled:d,trigger:y},M,k),{tooltipProps:q}=mt({isOpen:C,...A(a,me)},M),{overlayProps:J,placement:G,updatePosition:fe}=Ue({isOpen:C,targetRef:k,placement:ze(b),overlayRef:L,offset:p?r+3:r,crossOffset:j,shouldFlip:h,containerPadding:i});Ye(()=>{K.length&&fe()},K);const{overlayProps:Q}=_e({isOpen:C,onClose:M.close,isDismissable:g,shouldCloseOnBlur:le,isKeyboardDismissDisabled:ie,shouldCloseOnInteractOutside:ce},L),H=c.useMemo(()=>{var O,V,X;return ee({...o,radius:(O=t==null?void 0:t.radius)!=null?O:"md",size:(V=t==null?void 0:t.size)!=null?V:"md",shadow:(X=t==null?void 0:t.shadow)!=null?X:"sm"})},[He(o),t==null?void 0:t.radius,t==null?void 0:t.size,t==null?void 0:t.shadow]),xe=c.useCallback((O={},V=null)=>({...A(Y,O),ref:We(V,k),"aria-describedby":C?F:void 0}),[Y,C,F,M]),be=c.useCallback(()=>({ref:L,"data-slot":"base","data-open":R(C),"data-arrow":R(p),"data-disabled":R(d),"data-placement":te(G,b),...A(q,Q,B),style:A(J.style,B.style,a.style),className:H.base({class:S==null?void 0:S.base}),id:F}),[H,C,p,d,G,b,q,Q,B,J,a,F]),he=c.useCallback(()=>({"data-slot":"content","data-open":R(C),"data-arrow":R(p),"data-disabled":R(d),"data-placement":te(G,b),className:H.content({class:Ve(S==null?void 0:S.content,de)})}),[H,C,p,d,G,b,S]);return{Component:pe,content:s,children:l,isOpen:C,triggerRef:k,showArrow:p,portalContainer:ne,placement:b,disableAnimation:t==null?void 0:t.disableAnimation,isDisabled:d,motionProps:ue,getTooltipContentProps:he,getTriggerProps:xe,getTooltipProps:be}}var se=Be((t,a)=>{const{Component:o,children:n,content:f,isOpen:m,portalContainer:s,placement:l,disableAnimation:u,motionProps:x,getTriggerProps:d,getTooltipProps:y,getTooltipContentProps:h}=xt({...t,ref:a});let i;try{if(c.Children.count(n)!==1)throw new Error;if(!c.isValidElement(n))i=e.jsx("p",{...d(),children:n});else{const g=n;i=c.cloneElement(g,d(g.props,g.ref))}}catch{i=e.jsx("span",{}),qe("Tooltip must have only one child node. Please, check your code.")}const{ref:b,id:v,style:D,...p}=y(),r=e.jsx("div",{ref:b,id:v,style:D,children:e.jsx(Je,{features:Qe,children:e.jsx(Xe.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ae.scaleSpring,...A(x,p),style:{...Ke(l)},children:e.jsx(o,{...h(),children:f})})})});return e.jsxs(e.Fragment,{children:[i,u&&m?e.jsx(re,{portalContainer:s,children:e.jsx("div",{ref:b,id:v,style:D,...p,children:e.jsx(o,{...h(),children:f})})}):e.jsx(Ze,{children:m?e.jsx(re,{portalContainer:s,children:r}):null})]})});se.displayName="NextUI.Tooltip";var bt=se;function Jt({auth:t}){const{props:{guests:a}}=$e(),[o,n]=$.useState(""),m=a.slice().sort((r,j)=>r.name.localeCompare(j.name)).filter(r=>r.name.toLowerCase().includes(o.toLowerCase())),[s,l]=$.useState(!1),[u,x]=$.useState(null),d=async()=>{if(m.length===0){U.fire({icon:"warning",title:"No Records",text:"There are no guests to export."});return}try{const r=await ye.get("/generate-report",{responseType:"blob"}),j=window.URL.createObjectURL(new Blob([r.data])),g=document.createElement("a");g.href=j,g.setAttribute("download","Guests_Report.pdf"),document.body.appendChild(g),g.click(),U.fire({icon:"success",title:"PDF Report Generated",text:"The PDF report has been successfully generated and downloaded."})}catch(r){console.error("Error generating PDF report:",r),U.fire({icon:"error",title:"Error",text:"Failed to generate PDF report. Please try again later."})}},y=r=>{x(r),l(!0)},h=()=>{l(!1)},[i,b]=$.useState(1),v=10,D=Math.ceil(m.length/v),p=$.useMemo(()=>{const r=(i-1)*v,j=r+v;return m.slice(r,j)},[i,v,m]);return e.jsxs(De,{user:t.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(je,{title:"Guests"}),e.jsx("div",{className:"py-8 p-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex justify-between gap-3 items-end mb-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(Z,{color:"secondary",variant:"flat",onClick:d,className:"mt-6",startContent:e.jsx(Ne,{}),children:"Export to PDF"})}),e.jsx(N,{variant:"bordered",value:o,onChange:r=>n(r.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(ge,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})]})}),e.jsxs(Ce,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(et,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:i,total:D,onChange:r=>b(r)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(Pe,{children:[e.jsx(P,{className:"text-success",children:"#"}),e.jsx(P,{children:"NAME"}),e.jsx(P,{children:"EMAIL"}),e.jsx(P,{children:"PHONE"}),e.jsx(P,{children:"ID TYPE"}),e.jsx(P,{children:"ID NUMBER"}),e.jsx(P,{children:"COMPANY"}),e.jsx(P,{children:"ADDRESS"}),e.jsx(P,{children:"DATE CREATED"}),e.jsx(P,{children:"ACTION"})]}),e.jsx(Te,{emptyContent:"No guests found",items:p,children:p.map((r,j)=>e.jsxs(we,{children:[e.jsx(T,{className:"text-success",children:(i-1)*v+j+1}),e.jsx(T,{children:r.name}),e.jsx(T,{children:r.email}),e.jsx(T,{children:r.phone}),e.jsx(T,{children:r.id_type}),e.jsx(T,{children:r.id_number}),e.jsx(T,{children:r.company}),e.jsx(T,{children:r.address}),e.jsx(T,{children:new Date(r.created_at).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}),e.jsx(T,{children:e.jsx("div",{className:"flex justify-center text-xl cursor-pointer active:opacity-50",children:e.jsx(bt,{showArrow:!0,color:"primary",content:"View",children:e.jsx("span",{className:"text-primary cursor-pointer active:opacity-50",onClick:()=>y(r),children:e.jsx(Oe,{className:"text-primary"})})})})})]},r.id))})]})]})}),e.jsx(tt,{isDismissable:!1,isOpen:s,onOpenChange:h,hideCloseButton:!0,backdrop:"blur",children:e.jsx(rt,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"flex flex-col gap-1",children:"Guest Details"}),e.jsx(at,{children:u&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(N,{label:"Guest Name",variant:"bordered",value:u.name}),e.jsx(N,{label:"Email",variant:"bordered",value:u.email}),e.jsx(N,{label:"Phone",variant:"bordered",value:u.phone??void 0}),e.jsx(N,{label:"ID Type",variant:"bordered",value:u.id_type}),e.jsx(N,{label:"ID Number",variant:"bordered",value:u.id_number??void 0}),e.jsx(N,{label:"Company",variant:"bordered",value:u.company??void 0}),e.jsx(N,{label:"Address",variant:"bordered",value:u.address??void 0})]})}),e.jsx(st,{children:e.jsx(Z,{color:"danger",onPress:h,children:"Close"})})]})})})]})}export{Jt as default};
