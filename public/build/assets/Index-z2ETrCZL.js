import{m as $,$ as ve,r as c,j as e,q as $e,Y as je,b as ye}from"./app-DypD7DBq.js";import{S as ge,t as Ce,a as Pe,b as O,c as we,d as Te,e as N,E as Oe}from"./Icons-BXSTvyjW.js";import{A as Ne}from"./AuthenticatedLayout-DCkSc-oF.js";import{b as Z}from"./index-CdWXd9UN.js";import{b as Ee}from"./index-whE6AZDY.js";import{S as U}from"./sweetalert2.all-DLFEJUmH.js";import{$ as De,a as _e,T as Ae}from"./useDialog-BNEdWec9.js";import{$ as Se,a as Re,b as ae,c as _,d as Me,e as Ie,f as ke,g as Fe,m as Le,h as Ge,o as He,i as A,j as Ve,k as Be}from"./chunk-XHQUSKIE-qYDUNntE.js";import{$ as Ue,p as ee,g as te,t as ze,a as Ke}from"./useMenuTriggerState-CNOi6V0o.js";import{m as We}from"./chunk-CIZQCQPA-CTc914lg.js";import{u as Ye}from"./index-oRuB4s2K.js";import{w as qe}from"./chunk-HUKVTWEI-CvA8_I0w.js";import{L as Je,d as Qe,m as Xe,A as Ze}from"./chunk-6NL67ZRH-BTcbJp8B.js";import{i as S}from"./chunk-ZH5EUE66-YUWunM4J.js";import{p as et}from"./chunk-F7XGZDO5-6RXxdG0x.js";import{m as tt,a as ot,b as rt,c as at}from"./chunk-X4CB5I5S-Dl-JiiSC.js";import{m as st}from"./chunk-QY5NICTW-BCgnufM2.js";import"./getScrollParent-BESuCxWs.js";import"./VisuallyHidden-Tbc0MvqK.js";import"./LiveAnnouncer-CuNtP5Ew.js";import"./useUpdateEffect-Djmk_6Ya.js";import"./chunk-7F3ZLNJ6-W-roAXLH.js";import"./chunk-IXXDDLGU-C9qkWgRS.js";import"./ApplicationLogo-CIWarzPs.js";import"./chunk-3XT5V4LF-BLTFu2zb.js";import"./chunk-44JHHBS2-6diqizaA.js";import"./useControlledState-BaJ3NG1D.js";import"./index-pehEsIWf.js";import"./iconBase-BLbOLdvd.js";import"./index-DSHhwMlf.js";import"./useField-9Rw8BUJg.js";import"./index-X92CTFGl.js";const z=$.createContext(null);function lt(t){let{children:a}=t,o=c.useContext(z),[n,f]=c.useState(0),p=c.useMemo(()=>({parent:o,modalCount:n,addModal(){f(s=>s+1),o&&o.addModal()},removeModal(){f(s=>s-1),o&&o.removeModal()}}),[o,n]);return $.createElement(z.Provider,{value:p},a)}function nt(){let t=c.useContext(z);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:null}}}function it(t){let{modalProviderProps:a}=nt();return $.createElement("div",{"data-overlay-container":!0,...t,...a})}function ct(t){return $.createElement(lt,null,$.createElement(it,t))}function oe(t){let a=Se(),{portalContainer:o=a?null:document.body,...n}=t;if($.useEffect(()=>{if(o!=null&&o.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[o]),!o)return null;let f=$.createElement(ct,n);return ve.createPortal(f,o)}const dt=1500,re=500;let E={},ut=0,I=!1,P=null,D=null;function pt(t={}){let{delay:a=dt,closeDelay:o=re}=t,{isOpen:n,open:f,close:p}=De(t),s=c.useMemo(()=>`${++ut}`,[]),l=c.useRef(),m=()=>{E[s]=y},x=()=>{for(let i in E)i!==s&&(E[i](!0),delete E[i])},d=()=>{clearTimeout(l.current),l.current=null,x(),m(),I=!0,f(),P&&(clearTimeout(P),P=null),D&&(clearTimeout(D),D=null)},y=i=>{i||o<=0?(clearTimeout(l.current),l.current=null,p()):l.current||(l.current=setTimeout(()=>{l.current=null,p()},o)),P&&(clearTimeout(P),P=null),I&&(D&&clearTimeout(D),D=setTimeout(()=>{delete E[s],D=null,I=!1},Math.max(re,o)))},h=()=>{x(),m(),!n&&!P&&!I?P=setTimeout(()=>{P=null,I=!0,d()},a):n||d()};return c.useEffect(()=>()=>{clearTimeout(l.current),E[s]&&delete E[s]},[s]),{isOpen:n,open:i=>{!i&&a>0&&!l.current?h():d()},close:y}}function mt(t,a){let o=Re(t,{labelable:!0}),{hoverProps:n}=ae({onHoverStart:()=>a==null?void 0:a.open(!0),onHoverEnd:()=>a==null?void 0:a.close()});return{tooltipProps:_(o,n,{role:"tooltip"})}}function ft(t,a,o){let{isDisabled:n,trigger:f}=t,p=Me(),s=c.useRef(!1),l=c.useRef(!1),m=()=>{(s.current||l.current)&&a.open(l.current)},x=u=>{!s.current&&!l.current&&a.close(u)};c.useEffect(()=>{let u=r=>{o&&o.current&&r.key==="Escape"&&(r.stopPropagation(),a.close(!0))};if(a.isOpen)return document.addEventListener("keydown",u,!0),()=>{document.removeEventListener("keydown",u,!0)}},[o,a]);let d=()=>{f!=="focus"&&(ke()==="pointer"?s.current=!0:s.current=!1,m())},y=()=>{f!=="focus"&&(l.current=!1,s.current=!1,x())},h=()=>{l.current=!1,s.current=!1,x(!0)},i=()=>{Fe()&&(l.current=!0,m())},b=()=>{l.current=!1,s.current=!1,x(!0)},{hoverProps:v}=ae({isDisabled:n,onHoverStart:d,onHoverEnd:y}),{focusableProps:w}=Ie({isDisabled:n,onFocus:i,onBlur:b},o);return{triggerProps:{"aria-describedby":a.isOpen?p:void 0,..._(w,v,{onPointerDown:h,onKeyDown:h})},tooltipProps:{id:p}}}function xt(t){const[a,o]=Le(t,ee.variantKeys),{ref:n,as:f,isOpen:p,content:s,children:l,defaultOpen:m,onOpenChange:x,isDisabled:d,trigger:y,shouldFlip:h=!0,containerPadding:i=12,placement:b="top",delay:v=0,closeDelay:w=500,showArrow:u=!1,offset:r=7,crossOffset:j=0,isDismissable:g,shouldCloseOnBlur:le=!0,portalContainer:ne,isKeyboardDismissDisabled:ie=!1,updatePositionDeps:K=[],shouldCloseOnInteractOutside:ce,className:de,onClose:W,motionProps:ue,classNames:R,...B}=a,pe=f||"div",M=pt({delay:v,closeDelay:w,isDisabled:d,defaultOpen:m,isOpen:p,onOpenChange:T=>{x==null||x(T),T||W==null||W()}}),k=c.useRef(null),F=c.useRef(null),L=c.useId(),C=M.isOpen&&!d;c.useImperativeHandle(n,()=>Ge(F));const{triggerProps:Y,tooltipProps:me}=ft({isDisabled:d,trigger:y},M,k),{tooltipProps:q}=mt({isOpen:C,..._(a,me)},M),{overlayProps:J,placement:G,updatePosition:fe}=Ue({isOpen:C,targetRef:k,placement:ze(b),overlayRef:F,offset:u?r+3:r,crossOffset:j,shouldFlip:h,containerPadding:i});Ye(()=>{K.length&&fe()},K);const{overlayProps:Q}=_e({isOpen:C,onClose:M.close,isDismissable:g,shouldCloseOnBlur:le,isKeyboardDismissDisabled:ie,shouldCloseOnInteractOutside:ce},F),H=c.useMemo(()=>{var T,V,X;return ee({...o,radius:(T=t==null?void 0:t.radius)!=null?T:"md",size:(V=t==null?void 0:t.size)!=null?V:"md",shadow:(X=t==null?void 0:t.shadow)!=null?X:"sm"})},[He(o),t==null?void 0:t.radius,t==null?void 0:t.size,t==null?void 0:t.shadow]),xe=c.useCallback((T={},V=null)=>({..._(Y,T),ref:We(V,k),"aria-describedby":C?L:void 0}),[Y,C,L,M]),be=c.useCallback(()=>({ref:F,"data-slot":"base","data-open":A(C),"data-arrow":A(u),"data-disabled":A(d),"data-placement":te(G,b),..._(q,Q,B),style:_(J.style,B.style,a.style),className:H.base({class:R==null?void 0:R.base}),id:L}),[H,C,u,d,G,b,q,Q,B,J,a,L]),he=c.useCallback(()=>({"data-slot":"content","data-open":A(C),"data-arrow":A(u),"data-disabled":A(d),"data-placement":te(G,b),className:H.content({class:Ve(R==null?void 0:R.content,de)})}),[H,C,u,d,G,b,R]);return{Component:pe,content:s,children:l,isOpen:C,triggerRef:k,showArrow:u,portalContainer:ne,placement:b,disableAnimation:t==null?void 0:t.disableAnimation,isDisabled:d,motionProps:ue,getTooltipContentProps:he,getTriggerProps:xe,getTooltipProps:be}}var se=Be((t,a)=>{const{Component:o,children:n,content:f,isOpen:p,portalContainer:s,placement:l,disableAnimation:m,motionProps:x,getTriggerProps:d,getTooltipProps:y,getTooltipContentProps:h}=xt({...t,ref:a});let i;try{if(c.Children.count(n)!==1)throw new Error;if(!c.isValidElement(n))i=e.jsx("p",{...d(),children:n});else{const g=n;i=c.cloneElement(g,d(g.props,g.ref))}}catch{i=e.jsx("span",{}),qe("Tooltip must have only one child node. Please, check your code.")}const{ref:b,id:v,style:w,...u}=y(),r=e.jsx("div",{ref:b,id:v,style:w,children:e.jsx(Je,{features:Qe,children:e.jsx(Xe.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ae.scaleSpring,..._(x,u),style:{...Ke(l)},children:e.jsx(o,{...h(),children:f})})})});return e.jsxs(e.Fragment,{children:[i,m&&p?e.jsx(oe,{portalContainer:s,children:e.jsx("div",{ref:b,id:v,style:w,...u,children:e.jsx(o,{...h(),children:f})})}):e.jsx(Ze,{children:p?e.jsx(oe,{portalContainer:s,children:r}):null})]})});se.displayName="NextUI.Tooltip";var bt=se;function qt({auth:t}){const{props:{guests:a}}=$e(),[o,n]=$.useState(""),p=a.slice().sort((r,j)=>r.name.localeCompare(j.name)).filter(r=>r.name.toLowerCase().includes(o.toLowerCase())),[s,l]=$.useState(!1),[m,x]=$.useState(null),d=async()=>{if(p.length===0){U.fire({icon:"warning",title:"No Records",text:"There are no guests to export."});return}try{const r=await ye.get("/generate-report",{responseType:"blob"}),j=window.URL.createObjectURL(new Blob([r.data])),g=document.createElement("a");g.href=j,g.setAttribute("download","Guests_Report.pdf"),document.body.appendChild(g),g.click(),U.fire({icon:"success",title:"PDF Report Generated",text:"The PDF report has been successfully generated and downloaded."})}catch(r){console.error("Error generating PDF report:",r),U.fire({icon:"error",title:"Error",text:"Failed to generate PDF report. Please try again later."})}},y=r=>{x(r),l(!0)},h=()=>{l(!1)},[i,b]=$.useState(1),v=10,w=Math.ceil(p.length/v),u=$.useMemo(()=>{const r=(i-1)*v,j=r+v;return p.slice(r,j)},[i,v,p]);return e.jsxs(Ne,{user:t.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(je,{title:"Guests"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex justify-between gap-3 items-end mb-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(Z,{color:"secondary",variant:"flat",onClick:d,className:"mt-6",startContent:e.jsx(Ee,{}),children:"Export to PDF"})}),e.jsx(S,{variant:"bordered",value:o,onChange:r=>n(r.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(ge,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})]})}),e.jsxs(Ce,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(et,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:i,total:w,onChange:r=>b(r)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(Pe,{children:[e.jsx(O,{className:"text-success",children:"#"}),e.jsx(O,{children:"NAME"}),e.jsx(O,{children:"EMAIL"}),e.jsx(O,{children:"PHONE"}),e.jsx(O,{children:"COMPANY"}),e.jsx(O,{children:"ADDRESS"}),e.jsx(O,{children:"ACTION"})]}),e.jsx(we,{emptyContent:"No guests found",items:u,children:u.map((r,j)=>e.jsxs(Te,{children:[e.jsx(N,{className:"text-success",children:(i-1)*v+j+1}),e.jsx(N,{children:r.name}),e.jsx(N,{children:r.email}),e.jsx(N,{children:r.phone}),e.jsx(N,{children:r.company}),e.jsx(N,{children:r.address}),e.jsx(N,{children:e.jsx("div",{className:"flex justify-center text-xl cursor-pointer active:opacity-50",children:e.jsx(bt,{showArrow:!0,color:"primary",content:"View",children:e.jsx("span",{className:"text-primary cursor-pointer active:opacity-50",onClick:()=>y(r),children:e.jsx(Oe,{className:"text-primary"})})})})})]},r.id))})]})]})}),e.jsx(tt,{isDismissable:!1,isOpen:s,onOpenChange:h,hideCloseButton:!0,backdrop:"blur",children:e.jsx(ot,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"flex flex-col gap-1",children:"Guest Details"}),e.jsx(at,{children:m&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(S,{label:"Name",variant:"bordered",value:m.name}),e.jsx(S,{label:"Email",variant:"bordered",value:m.email}),e.jsx(S,{label:"Phone",variant:"bordered",value:m.phone??void 0}),e.jsx(S,{label:"Company",variant:"bordered",value:m.company??void 0}),e.jsx(S,{label:"Address",variant:"bordered",value:m.address??void 0})]})}),e.jsx(st,{children:e.jsx(Z,{color:"primary",onPress:h,children:"Close"})})]})})})]})}export{qt as default};
