import{r,j as e,m as z,Y as R}from"./app-C9xMKY8f.js";import{A as G}from"./AuthenticatedLayout-Bn_z_A7n.js";import{S as H,t as A,a as q,b,c as K,d as U,e as x}from"./Icons-D8Ea4rgJ.js";import"./sweetalert2.all-NiPoOY69.js";import{c as s}from"./index-BWXmSKzc.js";import{d as Y}from"./chunk-CEX5JYEG-DggoJFx5.js";import{t as J,r as L,m as Q,u as W,j as T,q as X,o as Z,s as ee,c as se,k as ae}from"./chunk-XHQUSKIE-CADJNX0Z.js";import{C as te,i as re}from"./chunk-ZH5EUE66-BgyEOsmF.js";import{s as ne,l as k}from"./chunk-OKTOLZE5-C3y_EWfF.js";import{p as oe}from"./chunk-F7XGZDO5-DHbRE60a.js";import"./ApplicationLogo-S0HA-0_M.js";import"./chunk-3XT5V4LF-B3IZxfQQ.js";import"./useMenuTriggerState-5wuwMrBu.js";import"./useDialog-DTVgfBZf.js";import"./useControlledState-vwv_wO5o.js";import"./VisuallyHidden-Hyja-Iiq.js";import"./index-B8szy7P2.js";import"./chunk-CIZQCQPA-DfVCRlnD.js";import"./chunk-6NL67ZRH-ef8d1IwE.js";import"./chunk-44JHHBS2-CWYTeokp.js";import"./index-ZU28rvO9.js";import"./getScrollParent-BuAW_jod.js";import"./chunk-HUKVTWEI-CD33P_jM.js";import"./index-Bk5yCoHe.js";import"./useField-DTXbaKdT.js";import"./LiveAnnouncer-CuNtP5Ew.js";import"./useUpdateEffect-DU0pEjX6.js";import"./chunk-7F3ZLNJ6-Be-F3fcD.js";import"./chunk-IXXDDLGU-Ceg6H6zY.js";import"./useFilter-CKr9Sp5r.js";import"./chunk-VGNVQLL4-Dw5EXT0h.js";import"./index-X92CTFGl.js";var $=J({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...L,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:s.solid.default}},{variant:"solid",color:"primary",class:{base:s.solid.primary}},{variant:"solid",color:"secondary",class:{base:s.solid.secondary}},{variant:"solid",color:"success",class:{base:s.solid.success}},{variant:"solid",color:"warning",class:{base:s.solid.warning}},{variant:"solid",color:"danger",class:{base:s.solid.danger}},{variant:"shadow",color:"default",class:{base:s.shadow.default}},{variant:"shadow",color:"primary",class:{base:s.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:s.shadow.secondary}},{variant:"shadow",color:"success",class:{base:s.shadow.success}},{variant:"shadow",color:"warning",class:{base:s.shadow.warning}},{variant:"shadow",color:"danger",class:{base:s.shadow.danger}},{variant:"bordered",color:"default",class:{base:s.bordered.default}},{variant:"bordered",color:"primary",class:{base:s.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:s.bordered.secondary}},{variant:"bordered",color:"success",class:{base:s.bordered.success}},{variant:"bordered",color:"warning",class:{base:s.bordered.warning}},{variant:"bordered",color:"danger",class:{base:s.bordered.danger}},{variant:"flat",color:"default",class:{base:s.flat.default}},{variant:"flat",color:"primary",class:{base:s.flat.primary}},{variant:"flat",color:"secondary",class:{base:s.flat.secondary}},{variant:"flat",color:"success",class:{base:s.flat.success}},{variant:"flat",color:"warning",class:{base:s.flat.warning}},{variant:"flat",color:"danger",class:{base:s.flat.danger}},{variant:"faded",color:"default",class:{base:s.faded.default}},{variant:"faded",color:"primary",class:{base:s.faded.primary}},{variant:"faded",color:"secondary",class:{base:s.faded.secondary}},{variant:"faded",color:"success",class:{base:s.faded.success}},{variant:"faded",color:"warning",class:{base:s.faded.warning}},{variant:"faded",color:"danger",class:{base:s.faded.danger}},{variant:"light",color:"default",class:{base:s.light.default}},{variant:"light",color:"primary",class:{base:s.light.primary}},{variant:"light",color:"secondary",class:{base:s.light.secondary}},{variant:"light",color:"success",class:{base:s.light.success}},{variant:"light",color:"warning",class:{base:s.light.warning}},{variant:"light",color:"danger",class:{base:s.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]});function le(u){const[m,p]=Q(u,$.variantKeys),{ref:C,as:c,children:l,avatar:h,startContent:o,endContent:n,onClose:f,classNames:t,className:y,...g}=m,j=c||"div",M=W(C),S=T(t==null?void 0:t.base,y),v=!!f,_=u.variant==="dot",{focusProps:E,isFocusVisible:I}=X(),D=r.useMemo(()=>typeof l=="string"&&(l==null?void 0:l.length)===1,[l]),N=r.useMemo(()=>!!h||!!o,[h,o]),P=r.useMemo(()=>!!n||v,[n,v]),a=r.useMemo(()=>$({...p,hasStartContent:N,hasEndContent:P,isOneChar:D,isCloseable:v,isCloseButtonFocusVisible:I}),[Z(p),I,N,P,D,v]),{pressProps:i}=ee({isDisabled:!!(u!=null&&u.isDisabled),onPress:f}),d=()=>({ref:M,className:a.base({class:S}),...g}),O=()=>({role:"button",tabIndex:0,className:a.closeButton({class:t==null?void 0:t.closeButton}),...se(i,E)}),B=w=>r.isValidElement(w)?r.cloneElement(w,{className:a.avatar({class:t==null?void 0:t.avatar})}):null,V=w=>r.isValidElement(w)?r.cloneElement(w,{className:T("max-h-[80%]",w.props.className)}):null;return{Component:j,children:l,slots:a,classNames:t,isDot:_,isCloseable:v,startContent:B(h)||V(o),endContent:V(n),getCloseButtonProps:O,getChipProps:d}}var F=ae((u,m)=>{const{Component:p,children:C,slots:c,classNames:l,isDot:h,isCloseable:o,startContent:n,endContent:f,getCloseButtonProps:t,getChipProps:y}=le({...u,ref:m}),g=r.useMemo(()=>h&&!n?e.jsx("span",{className:c.dot({class:l==null?void 0:l.dot})}):n,[c,n,h]),j=r.useMemo(()=>o?e.jsx("span",{...t(),children:f||e.jsx(te,{})}):f,[f,o,t]);return e.jsxs(p,{...y(),children:[g,e.jsx("span",{className:c.content({class:l==null?void 0:l.content}),children:C}),j]})});F.displayName="NextUI.Chip";var ie=F;function Ge({auth:u,guestLogs:m}){const[p,C]=r.useState(""),[c,l]=r.useState({start:null,end:null}),h=a=>{const i=a.guest.name.toLowerCase().includes(p.toLowerCase()),d=(!c.start||new Date(a.created_at)>=new Date(c.start))&&(!c.end||new Date(a.created_at)<=new Date(c.end));return i&&d},o=m.filter(h),[n,f]=z.useState(1),t=15,y=Math.ceil(o.length/t),g=z.useMemo(()=>{const a=(n-1)*t,i=a+t;return o.slice(a,i)},[n,t,o]);r.useState("");const[j,M]=r.useState(1),[S,v]=r.useState(13),[_,E]=r.useState("past24Hours"),[I,D]=r.useState([]);r.useEffect(()=>{(()=>{const i=new Date;let d=null;switch(_){case"past24Hours":d=new Date(i.getTime()-864e5);break;case"past7Days":d=new Date(i.getTime()-6048e5);break;case"past30Days":d=new Date(i.getTime()-2592e6);break;default:d=null;break}if(d){const O=m.filter(B=>new Date(B.check_in_time)>=d);D(O)}else D(m)})()},[_,m]);const N=j*S,P=N-S;return o.slice(P,N),e.jsxs(G,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Guest Logs"}),children:[e.jsx(R,{title:"Guests Logs"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2 justify-end mb-4",children:[e.jsx(re,{variant:"bordered",placeholder:"Search by guest name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(H,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:p,onChange:a=>C(a.target.value)}),e.jsxs(ne,{variant:"bordered",placeholder:"Past 24 Hours",value:_,onChange:a=>E(a.target.value),children:[e.jsx(k,{value:"current",children:"All Time"},"current"),e.jsx(k,{value:"past24Hours",children:"Past 24 Hours"},"past24Hours"),e.jsx(k,{value:"past7Days",children:"Past 7 Days"},"past7Days"),e.jsx(k,{value:"past30Days",children:"Past 30 Days"},"past30Days")]}),e.jsx(Y,{label:"Filter by Date",labelPlacement:"top",className:"max-w-xs",variant:"bordered",visibleMonths:2,onChange:a=>l(a)})]}),e.jsxs(A,{selectionMode:"single","aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(oe,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:n,total:y,onChange:a=>f(a)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(q,{children:[e.jsxs(b,{className:"text-success",children:["# (",(n-1)*t+1,"-",Math.min(n*t,o.length)," ","of ",o.length,")"]}),e.jsx(b,{children:"Guest ID"}),e.jsx(b,{children:"Guest Name"}),e.jsx(b,{children:"Purpose of Visit"}),e.jsx(b,{children:"Check In"}),e.jsx(b,{children:"Check Out"}),e.jsx(b,{children:"Status"})]}),e.jsx(K,{emptyContent:"No guests found.",items:g,children:g.map((a,i)=>e.jsxs(U,{children:[e.jsx(x,{className:"text-success",children:(n-1)*t+i+1}),e.jsx(x,{children:a.guest_id}),e.jsx(x,{children:a.guest.name}),e.jsx(x,{children:a.purpose_of_visit}),e.jsx(x,{children:a.check_in_time}),e.jsx(x,{children:a.check_out_time}),e.jsx(x,{children:e.jsx(ie,{color:a.check_out_time?"success":"warning",children:a.check_out_time?"Checked Out":"Not Checked Out yet"})})]},a.id))})]})]})})})]})}export{Ge as default};
