import{m as q,r as n,j as e}from"./app-D6oMoqqm.js";import{b as o,d as k}from"./index-D9vgJChr.js";import{S as E}from"./sweetalert2.all-XPMZHkQs.js";import{c as U}from"./index-BlKwdCzO.js";import{G as h}from"./iconBase-BR-cmu0o.js";import{a as K,G as w}from"./index-5ylr5ja1.js";import{W as H}from"./react-webcam-Cgarn_B9.js";import{b as Y}from"./index-CCoB1n6b.js";import{e as J,l as s,s as Q}from"./chunk-OKTOLZE5-D2UsWInQ.js";import{m as O}from"./chunk-QY5NICTW-DHNEszEU.js";import{m as _,a as I,b as S,c as D}from"./chunk-X4CB5I5S-CZmd-Y4C.js";import{c as X}from"./chunk-HUKVTWEI-DXkA-xqJ.js";import{i as m}from"./chunk-ZH5EUE66-BnbBlYs5.js";import{i as Z}from"./chunk-YAC6J4IU-BaFl9UhN.js";function M(t){return null}M.getCollectionNode=function*(a){let{children:l,title:v,items:u}=a;yield{type:"section",props:a,hasChildNodes:!0,rendered:v,"aria-label":a["aria-label"],*childNodes(){if(typeof l=="function"){if(!u)throw new Error("props.children was a function but props.items is missing");for(let c of u)yield{type:"item",value:c,renderer:l}}else{let c=[];q.Children.forEach(l,b=>{c.push({type:"item",element:b})}),yield*c}}}};let ee=M;var te=ee,j=te;function se(t){return h({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 14h-6c-.553 0-1-.448-1-1s.447-1 1-1h6c.553 0 1 .448 1 1s-.447 1-1 1zM18 17c-.553 0-1-.448-1-1v-6c0-.552.447-1 1-1s1 .448 1 1v6c0 .552-.447 1-1 1zM9 6c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3m0-2c-2.764 0-5 2.238-5 5s2.236 5 5 5 5-2.238 5-5-2.236-5-5-5zM9 17c2.021 0 3.301.771 3.783 1.445-.683.26-1.969.555-3.783.555-1.984 0-3.206-.305-3.818-.542.459-.715 1.777-1.458 3.818-1.458m0-2c-3.75 0-6 2-6 4 0 1 2.25 2 6 2 3.518 0 6-1 6-2 0-2-2.354-4-6-4z"},child:[]}]})(t)}function ae(t){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function re(t){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function ne(t){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function ie(t){return h({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},child:[]}]})(t)}function oe(t){return h({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m350.54 148.68-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"272",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M124 158v-22h-24v22"},child:[]}]})(t)}function le(){const[t,a]=n.useState({name:"",email:"",phone:"",company:"",address:"",id_type:"",id_number:"",is_agreed:!0}),[l,v]=n.useState(!1);n.useState(!1);const[u,c]=n.useState(!1),[b,p]=n.useState(!1),[z,P]=n.useState(!0),[F,x]=n.useState(!1),[y,R]=n.useState(null),W=n.useRef(null),d=async i=>{const{name:r,value:C}=i.target;let N=C;(r==="name"||r==="company")&&(N=C.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" ")),a(g=>({...g,[r]:N}));const $=await L(N);P($)},B=async i=>{if(i.preventDefault(),!await L(t.name)){P(!1);return}({...t},await k.Inertia.post("/guest/register",t)),E.fire({title:"Success!",text:"You are registered successfully!",icon:"success",confirmButtonText:"OK"}),k.Inertia.visit(route("guestlog.create",{name:t.name}))},G=()=>{const i=W.current.getScreenshot();R(i),a(r=>({...r,photo:i})),x(!1)},T=()=>{v(!l)},V=()=>{p(!0)},A=()=>{p(!1),c(!0)},f="text-xl text-default-500 pointer-events-none flex-shrink-0",L=async i=>{try{return(await(await fetch(`/check-name/${encodeURIComponent(i)}`)).json()).available}catch(r){return console.error("Error checking name availability:",r),!1}};return e.jsxs("div",{children:[e.jsx(o,{color:"primary",variant:"shadow",className:"mt-6",onPress:V,startContent:e.jsx(se,{className:"w-6 h-6 text-success"}),children:"New Guest"}),e.jsx(_,{isOpen:b,onOpenChange:p,scrollBehavior:"inside",size:"lg",isDismissable:!1,isKeyboardDismissDisabled:!0,hideCloseButton:!0,children:e.jsxs(I,{children:[e.jsx(S,{className:"flex flex-col gap-1 items-center",children:e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:e.jsx("h2",{className:"text-2xl mb-4",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Guestbook Kiosk Privacy Notice",e.jsx("span",{className:"absolute  left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})})})}),e.jsx(D,{children:e.jsxs(J,{"aria-label":"Guest Consent",children:[e.jsxs(j,{title:"",showDivider:!0,children:[e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"This section outlines how we collect, use, and protect your personal and non-personal information. We are committed to safeguarding your privacy and ensuring a secure online experience with our guest logbook."})})},""),e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"We may collect personal details such as your name, email address, and phone number when you complete the registration form. This information allows us to effectively manage guest entries and ensure a personalized experience."})}),startContent:e.jsx(U,{className:f}),children:"Information Collection"},""),e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Your personal information is utilized for enhancing our guest logbook services, facilitating communication with you, and improving our overall user experience. We do not engage in any form of unauthorized marketing or sharing of your data."})}),startContent:e.jsx(re,{className:f}),children:"Use of Information"},""),e.jsx(s,{description:"We take appropriate measures to safeguard your data and maintain its confidentiality. Your information is not sold or shared with third parties unless required by law.",startContent:e.jsx(ne,{className:f}),children:"Data Protection"},""),e.jsx(s,{description:"By using our guest logbook and submitting information through the form, you consent to the terms outlined in this privacy policy.",startContent:e.jsx(ae,{className:f}),children:"Consent"},"")]}),e.jsx(j,{children:e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"We may update this privacy notice from time to time. We will post the updated notice on the Kiosk."})}),children:"Changes to this Privacy Notice"},"")}),e.jsx(j,{children:e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsxs("p",{children:["If you have any questions about this privacy notice, please contact us at"," ",e.jsx("b",{className:"text-blue-500",children:"dpcompliance@kiosk.com"})]})}),children:"Contact Us"},"")}),e.jsx(j,{children:e.jsx(s,{description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Thank you for entrusting us with your information."})})},"")})]})}),e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsx(X,{name:"is_agreed",checked:l,onChange:T,children:e.jsx("span",{className:"text-xs",children:"I have read and agreed to the privacy notice stated above and I understand that I can revoke my consent at any time."})})}),e.jsxs(O,{children:[e.jsx(o,{color:"primary",onPress:A,isDisabled:!l,startContent:e.jsx(K,{className:"w-7 h-8"}),children:"Continue"}),e.jsx(o,{color:"danger",onPress:()=>p(!1),startContent:e.jsx(w,{className:"w-4 h-4"}),children:"Cancel"})]})]})}),e.jsx(_,{isOpen:u,onOpenChange:()=>c(!1),size:"lg",scrollBehavior:"outside",isDismissable:!1,isKeyboardDismissDisabled:!0,hideCloseButton:!0,children:e.jsxs(I,{children:[e.jsx(S,{className:"justify-center text-2xl py-5",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("h2",{className:"text-2xl mb-4",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Guest Registration",e.jsx("span",{className:"absolute  left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})}),e.jsx("p",{className:"text-sm font-light",children:"Please fill up the form below to register."})]})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("p",{className:"text-xs my-1",children:[e.jsx("span",{className:"font-bold text-danger",children:"(*)"})," ","This red mark indicates a required field."]}),e.jsx("div",{className:"mb-2",children:e.jsx(m,{type:"text",name:"name",label:"Name",value:t.name,onChange:d,isRequired:!0,onClear:()=>a({...t,name:""}),isInvalid:!z,errorMessage:"The name you entered is already registered."})}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{type:"text",name:"company",label:"Company",value:t.company,onChange:d,isRequired:!0,isClearable:!0,onClear:()=>a({...t,company:""})})}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{type:"text",name:"phone",label:"Phone",value:t.phone,onChange:d,onClear:()=>a({...t,phone:""}),isRequired:!0})}),e.jsx("div",{className:"mb-4",children:e.jsxs(Q,{name:"id_type",label:"ID Type",value:t.id_type,onChange:d,placeholder:"Select",children:[e.jsx(s,{value:"passport",children:"Passport"},"Passport"),e.jsx(s,{value:"national_id",children:"National ID"},"National ID"),e.jsx(s,{value:"driver_license",children:"Driver's License"},"Driver's License"),e.jsx(s,{value:"work_id",children:"Work ID"},"Work ID"),e.jsx(s,{value:"voter_id",children:"Voter ID"},"Voter ID"),e.jsx(s,{value:"tin",children:"TIN"},"TIN"),e.jsx(s,{value:"postal_id",children:"Postal ID"},"Postal ID")]})}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{type:"text",name:"id_number",label:"ID Number",value:t.id_number,onChange:d,onClear:()=>a({...t,id_number:""})})}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{type:"email",name:"email",label:"Email",value:t.email,onChange:d,onClear:()=>a({...t,email:""})})}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{type:"text",name:"address",label:"Address",value:t.address,onChange:d,onClear:()=>a({...t,address:""})})}),e.jsx("div",{className:"mb-4 space-y-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{onPress:()=>x(!0),startContent:e.jsx(oe,{className:"w-6 h-6 text-success"}),children:"Capture Photo"}),y&&e.jsx(Z,{src:y,alt:"Captured"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end mt-5 mb-5",children:[e.jsx(o,{color:"primary",size:"lg",type:"submit",startContent:e.jsx(ie,{className:"w-6 h-6 text-success"}),children:"Submit"}),e.jsx(o,{color:"danger",size:"lg",startContent:e.jsx(w,{className:"w-5 h-5"}),onPress:()=>k.Inertia.visit(route("guestlog.create")),children:"Cancel"})]})]})})]})}),e.jsx(_,{isOpen:F,onOpenChange:x,size:"lg",children:e.jsxs(I,{children:[e.jsx(S,{children:"Capture Photo"}),e.jsx(D,{children:e.jsx(H,{audio:!1,ref:W,screenshotFormat:"image/jpeg",width:"100%",videoConstraints:{facingMode:"user"}})}),e.jsxs(O,{children:[e.jsx(o,{color:"primary",onPress:G,startContent:e.jsx(Y,{className:"w-5 h-5 text-success"}),children:"Capture"}),e.jsx(o,{color:"danger",onPress:()=>x(!1),startContent:e.jsx(w,{}),children:"Cancel"})]})]})})]})}const Ne=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{le as G,ie as H,Ne as a};
