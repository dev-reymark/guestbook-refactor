import{q as p,r as n,j as e,Y as f,b as g}from"./app-y-uc9JnW.js";import{S as o}from"./sweetalert2.all-C-QLXbQg.js";import{G as x}from"./iconBase-Dl2G9E0_.js";import{b as l,d as k}from"./index-DDttyNm0.js";import{u as b}from"./index-BFNGZVbv.js";import{m as j,a as _,b as w,c as y}from"./chunk-X4CB5I5S-CSgaGCUE.js";import{i as s}from"./chunk-ZH5EUE66-CxwCOe2U.js";import"./chunk-3XT5V4LF-Br_Fu_eS.js";import"./chunk-XHQUSKIE-CVOyE8zD.js";import"./chunk-6NL67ZRH-BfTdG8d2.js";import"./useControlledState-uO-7HELl.js";import"./index-D1JpouX6.js";import"./index-D9mA8Wi5.js";import"./useDialog-D2Le_h4J.js";import"./VisuallyHidden-OxbAlcM2.js";import"./getScrollParent-OVTTYp2z.js";import"./useField-DPE8Iy1E.js";function v(t){return x({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"},child:[]},{tag:"path",attr:{d:"M9 12h12l-3 -3"},child:[]},{tag:"path",attr:{d:"M18 15l3 -3"},child:[]}]})(t)}const q=()=>{const{guestLog:t,guestLogId:O,checkoutUrl:u}=p().props,{isOpen:m,onOpen:i,onOpenChange:h}=b(!0),[a,c]=n.useState(!1);n.useEffect(()=>{t.check_out_time?(new Audio("/assets/audio/checkout-warning.mp3").play(),o.fire({title:"Already Checked Out",text:"This guest has already been checked out.",icon:"warning",timer:5e3,showConfirmButton:!1}).then(()=>{window.location.href="/"})):i()},[t.check_out_time,i]);const d=()=>{c(!0),g.post(u).then(r=>{new Audio("/assets/audio/checkout-success.mp3").play(),o.fire({title:"Success!",text:"You have successfully checked out.",icon:"success",timer:5e3,showConfirmButton:!1}).then(()=>{window.location.href="/"})}).catch(r=>{console.error("Checkout error:",r),o.fire({title:"Error!",text:"An error occurred while checking out.",icon:"error",confirmButtonText:"OK"})}).finally(()=>{c(!1)})};return t?e.jsxs("div",{className:"min-h-screen bg-[url(/assets/images/bg.png)] bg-cover",children:[e.jsx(f,{title:"Check Out"}),e.jsx(j,{isOpen:m,onOpenChange:h,placement:"center",hideCloseButton:!0,isKeyboardDismissDisabled:!0,isDismissable:!1,children:e.jsx(_,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"flex flex-col",children:e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 ",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Your Log Details",e.jsx("span",{className:"absolute  left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})}),e.jsx("p",{className:"text-sm font-light",children:"Please click the button to check out."})]})}),e.jsx(y,{children:e.jsxs("div",{className:"mb-4 space-y-4",children:[e.jsx(s,{value:t.guest.id,label:"Guest ID",placeholder:"Guest ID",readOnly:!0}),e.jsx(s,{value:t.guest.name,label:"Guest Name",placeholder:"Guest Name",readOnly:!0}),e.jsx(s,{value:t.meeting_with,label:"Meeting With",placeholder:"Meeting With",readOnly:!0}),e.jsx(s,{value:t.purpose_of_visit,label:"Purpose of Visit",placeholder:"Purpose of Visit",readOnly:!0}),e.jsx(s,{value:new Date(new Date(t.check_in_time).getTime()-new Date(t.check_in_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),label:"Check In Time",placeholder:"Check In Time",readOnly:!0}),e.jsx(s,{value:t.check_out_time?new Date(new Date(t.check_out_time).getTime()-new Date(t.check_out_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Not checked out yet",label:"Check Out Time",placeholder:"Check Out Time",readOnly:!0,color:"warning"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!t.check_out_time&&e.jsx(l,{size:"lg",variant:"shadow",color:"primary",onClick:d,disabled:a,startContent:e.jsx(v,{className:"w-7 h-7 text-success"}),children:a?"Checking Out...":"Check Out"}),e.jsx(l,{size:"lg",onPress:()=>k.Inertia.visit("/"),color:"danger",children:"Later"})]})]})})]})})})]}):e.jsx("div",{children:"Loading..."})};export{q as default};
