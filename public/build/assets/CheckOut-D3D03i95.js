import{q as g,r as m,j as e,Y as b,b as j}from"./app-W9rABB7H.js";import{S as i}from"./sweetalert2.all-Czp1dwDO.js";import{a as k}from"./index-CMp3rl7L.js";import{b as d,d as _}from"./index-C1ZZOmxq.js";import{G as y}from"./index-B-Kmm_fb.js";import{u as w}from"./index-DxRfo5W9.js";import{m as C,a as O,b as v,c as N}from"./chunk-X4CB5I5S-BYgDSRRq.js";import{i as s}from"./chunk-ZH5EUE66-CeA2AVMT.js";import"./iconBase-DK-kuZej.js";import"./chunk-XHQUSKIE-D1XKxXcu.js";import"./useFocusable-CM9SnkFp.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./chunk-6NL67ZRH-CjJSE_D0.js";import"./useControlledState-BU-ccswk.js";import"./index-Cd3-71eU.js";import"./index-CwcQvHrJ.js";import"./useDialog-CDeD2rZ4.js";import"./VisuallyHidden-CQMxwDHt.js";import"./getScrollParent-CmMtsLqa.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useField-DwqTcdZv.js";const Q=()=>{const{guestLog:t,guestLogId:D,checkoutUrl:h}=g().props,{isOpen:p,onOpen:o,onOpenChange:f}=w(!0),[a,n]=m.useState(!1);m.useEffect(()=>{t.check_out_time?(new Audio("/assets/audio/checkout-warning.mp3").play(),i.fire({title:"Already Checked Out",text:"This guest has already been checked out.",icon:"warning",timer:5e3,showConfirmButton:!1}).then(()=>{window.location.href="/"})):o()},[t.check_out_time,o]);const x=()=>{n(!0),j.post(h).then(r=>{new Audio("/assets/audio/checkout-success.mp3").play(),i.fire({title:"Success!",text:r.data.message||"You have successfully checked out.",icon:"success",timer:5e3,showConfirmButton:!1}).then(()=>{window.location.href="/"})}).catch(r=>{var l,u;console.error("Checkout error:",r);const c=((u=(l=r.response)==null?void 0:l.data)==null?void 0:u.message)||"An error occurred while checking out.";i.fire({title:"Error!",text:c,icon:"error",confirmButtonText:"OK"})}).finally(()=>{n(!1)})};return t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-[url(/assets/images/bg.png)] bg-cover",children:[e.jsx(b,{title:"Check Out"}),e.jsx(C,{isOpen:p,onOpenChange:f,placement:"center",hideCloseButton:!0,isKeyboardDismissDisabled:!0,isDismissable:!1,scrollBehavior:"outside",children:e.jsx(O,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"flex flex-col",children:e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 ",children:e.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary relative",children:["Visit Details",e.jsx("span",{className:"absolute  left-1/2 transform -translate-x-1/2 -bottom-2 h-[3px] w-16 bg-[#2aefe6]"})]})}),e.jsx("p",{className:"text-sm font-light",children:"Please click the button to check out."})]})}),e.jsx(N,{children:e.jsxs("div",{className:"mb-4 space-y-4",children:[e.jsx(s,{value:t.guest.id,label:"Guest ID",placeholder:"Guest ID",readOnly:!0}),e.jsx(s,{value:t.guest.name,label:"Guest Name",placeholder:"Guest Name",readOnly:!0}),e.jsx(s,{value:t.meeting_with,label:"Meeting With",placeholder:"Meeting With",readOnly:!0}),e.jsx(s,{value:t.purpose_of_visit,label:"Purpose of Visit",placeholder:"Purpose of Visit",readOnly:!0}),e.jsx(s,{value:new Date(new Date(t.check_in_time).getTime()-new Date(t.check_in_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),label:"Check In Time",placeholder:"Check In Time",readOnly:!0}),e.jsx(s,{value:t.check_out_time?new Date(new Date(t.check_out_time).getTime()-new Date(t.check_out_time).getTimezoneOffset()*6e4).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Not checked out yet",label:"Check Out Time",placeholder:"Check Out Time",readOnly:!0,color:"warning"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!t.check_out_time&&e.jsx(d,{size:"lg",variant:"shadow",color:"primary",onClick:x,disabled:a,startContent:e.jsx(k,{className:"w-7 h-7 text-success button-icon"}),children:a?"Checking Out...":"Check Out"}),e.jsx(d,{size:"lg",onPress:()=>_.Inertia.visit("/"),color:"danger",startContent:e.jsx(y,{className:"w-4 h-4"}),children:"Cancel"})]})]})})]})})})]}),e.jsx("style",{jsx:!0,children:`
                @media screen and (max-width: 320px) {
                    .button-icon {
                        display: none;
                    }
                }
            `})]}):e.jsx("div",{children:"Loading..."})};export{Q as default};
